<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Installation NexentaEdge DevOps Edition on Bare Metal (physical servers) · NexentaEdge</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Installation NexentaEdge DevOps Edition on Bare Metal (physical servers) · NexentaEdge"/><meta property="og:type" content="website"/><meta property="og:url" content="http://nexentaedge.io/index.html"/><meta property="og:description" content="Fully Automatic deployment of NexentaEdge Container-Converged environment on set of physical servers. This procedure describes mechanism to deploy Storage and Networking infrastructure for production usage in data centers. Provided deployment tool will be verifying environment and ensures that destination targets meets all the requirements. It also sets most optimal configuration and provides a way to select target profile while deploying."/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="http://nexentaedge.io/blog/atom.xml" title="NexentaEdge Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="http://nexentaedge.io/blog/feed.xml" title="NexentaEdge Blog RSS Feed"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script><script type="text/javascript" src="https://unpkg.com/mermaid@8.0.0-rc.6/dist/mermaid.min.js"></script><script type="text/javascript" src="/js/main.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo-nexenta-full.png"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/docs/introduction.html" target="_self">Documentation</a></li><li><a href="/blog" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Getting Started</h3><ul><li class="navListItem"><a class="navItem" href="/docs/introduction.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/network-considerations.html">Networking Considerations</a></li><li class="navListItem"><a class="navItem" href="/docs/multi-tenancy-considerations.html">Multi-Tenancy Considerations</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/docs/webui-installation.html">Web UI Installation</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/baremetal-installation.html">Bare Metal Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/docker-installation.html">Docker Integration</a></li><li class="navListItem"><a class="navItem" href="/docs/kubernetes-installation.html">Kubernetes Integration</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/nexentaedge/nexentaedge.github.io/edit/master/src/docs/baremetal-installation.md" target="_blank">Edit</a><h1>Installation NexentaEdge DevOps Edition on Bare Metal (physical servers)</h1></header><article><div><span><p>Fully Automatic deployment of NexentaEdge Container-Converged environment on set of physical servers. This procedure describes mechanism to deploy Storage and Networking infrastructure for production usage in data centers. Provided deployment tool will be verifying environment and ensures that destination targets meets all the requirements. It also sets most optimal configuration and provides a way to select target profile while deploying.</p>
<h3><a class="anchor" aria-hidden="true" name="step-1-designing-cluster-network"></a><a href="#step-1-designing-cluster-network" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 1: Designing cluster network</h3>
<p>From a physical layout perspective, a NexentaEdge cluster is a collection of server devices connected via a high-performance 10,25,40,etc Gigabit switch. From a logical perspective, a NexentaEdge cluster consists of data nodes and gateway nodes running as containers that communicate over a Replicast network. The cluster provides storage services over an external network using the protocols that NexentaEdge supports. A NexentaEdge deployment consists of a single physical cluster and one or more logical cluster namespaces. Each logical cluster namespace may have multiple different tenants.</p>
<p>Figure below shows the components of a NexentaEdge cluster:</p>
<p><img src="https://raw.githubusercontent.com/nexenta/nedge-dev/master/images/deployment.png" alt="fig1: deplyoment"></p>
<p>A NexentaEdge cluster consists of the following components. A given device may have multiple roles assigned to it; for example, a server may be configured as a data node, gateway node and management controller.</p>
<ul>
<li><p>Data node containers - The data nodes collectively provide the storage for the NexentaEdge cluster. Objects are broken into chunks and distributed across the data nodes using the Replicast protocol. The set of data nodes where the chunks are stored or retrieved is determined based on server load and capacity information. Data nodes may be configured with interfaces to an IPv6 Replicast network for data distribution and storage and to an IPv4 network (either an external network or dedicated management network) for initial configuration with the NEDEPLOY tool and subsequent administration with the NEADM tool. After initial configuration, data nodes require only a connection to the Replicast network, since administration of the data nodes is done by the deployment workstation via the management controller node, which has connectivity to both the management network and the Replicast network.</p></li>
<li><p>Gateway node containers - Gateway nodes provide the connection between external clients and the data stored in the NexentaEdge cluster. Gateway nodes accept and respond to client requests, translating them into actions performed in the NexentaEdge cluster. Gateway nodes are provisioned with interfaces to the external network, Replicast network, and management network (if different from the external network). When you configure a NexentaEdge cluster, you indicate which storage service(s) you want to provide for a given tenant, then specify which should be the gateway nodes for that cluster/tenant/service combination.</p></li>
<li><p>Replicast network - The Replicast network is an isolated IPv6 VLAN used for communication and data transfer among the data nodes and gateway nodes in the NexentaEdge cluster. The Replicast protocol provides the means for efficient storage and retrieval of data in the cluster.</p></li>
<li><p>Deployment workstation container - The deployment workstation is the system from which you deploy and configure the NexentaEdge software to the other nodes. NexentaEdge uses the Chef environment for installation. You deploy NexentaEdge using a Chef Solo instance packaged with the NexentaEdge software.  To deploy NexentaEdge to the nodes in the cluster using the NEDEPLOY tool, the deployment workstation must have IPv4 network connectivity to the nodes, either through a management network or an external network.</p></li>
<li><p>Management controller node - A management controller (typically co-resident with Data or Gateway container) is a node that translates external cluster-wide behavior into internal component-specific configuration, and may provide the connection between the deployment workstation and the data nodes in the Replicast network. At least one of the nodes in the cluster must be a management controller. Management controllers need to have network connectivity to both the deployment workstation and to the other nodes in the cluster.</p></li>
<li><p>External network - External clients store and retrieve data in the NexentaEdge cluster by communicating with gateway nodes on the external network. The external network may use IPv4 or IPv6 and is likely to carry traffic unrelated to NexentaEdge.</p></li>
<li><p>Management network - To aid in deploying and administering the NexentaEdge cluster, you may elect to place the deployment workstation and data nodes in a dedicated IPv4 management network. The NEDEPLOY and NEADM tools, running on the deployment workstation, send configuration information to and receive status information from the data nodes over this network.</p></li>
<li><p>External clients - External clients are end-user application containers that access data stored in the NexentaEdge cluster via gateway nodes. External clients access data in the cluster using APIs of the storage services NexentaEdge supports: Docker volumes (NBD, NFS), Direct NFSv3,v4,v4.1, Block iSCSI/HA, Swift/S3/S3S Object.</p></li>
</ul>
<h3><a class="anchor" aria-hidden="true" name="step-2-install-nedeploy-and-neadm-management-tools"></a><a href="#step-2-install-nedeploy-and-neadm-management-tools" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 2: Install NEDEPLOY and NEADM management tools</h3>
<p>NexentaEdge defines set of well described Chef Cookbooks which provides easy way to deploy complex cluster infrastructure excluding possible human error.</p>
<p>To enable NEDEPLOY tool set the following or similar alias:</p>
<pre><code class="hljs"><span class="hljs-keyword">alias</span> <span class="hljs-title">nedeploy</span>=<span class="hljs-string">"docker run --network host -it nexenta/nedge-nedeploy /opt/nedeploy/nedeploy"</span>
</code></pre>
<p>Get familiar with the tool and run the pre-check utility to ensure that the node(s) meets the requirements for being added to the cluster:</p>
<pre><code class="hljs">nedeploy precheck <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ip-address</span>&gt;</span></span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">username:password</span>&gt;</span></span> -i <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">interface</span>&gt;</span></span>
   [<span class="hljs-string">-t &lt;profile&gt;</span>][<span class="hljs-symbol">-x &lt;disks-to-exclude&gt;</span>][<span class="hljs-string">-X &lt;disks-to-reserve&gt;</span>]
</code></pre>
<p>To enable NEADM tool setup the following or similar alias:</p>
<pre><code class="hljs"><span class="hljs-keyword">alias</span> <span class="hljs-title">neadm</span>=<span class="hljs-string">"docker run -i -t --rm -v ~/.neadmrc:/opt/nedge/neadm/.neadmrc --network host nexenta/nedge neadm"</span>
</code></pre>
<p>Copy <a href="https://github.com/Nexenta/nedge-dev/blob/master/conf/default/.neadmrc">.neadmrc</a> - <a href="https://raw.githubusercontent.com/Nexenta/nedge-dev/master/conf/default/.neadmrc">download</a> from &quot;default&quot; profile (located in conf directory) to ~/. If you planning to use neadm tool on a different host, you'll need to adjust API_URL to point to the right management IPv4 address. Default management port is 8080.</p>
<p>Optionally source <a href="https://github.com/Nexenta/nedge-dev/blob/master/conf/default/.bash_completion">.bash_completion</a> - <a href="https://raw.githubusercontent.com/Nexenta/nedge-dev/master/conf/default/.bash_completion">download</a> from &quot;default&quot; profile (located in conf directory).</p>
<p>See &quot;Prerequisites&quot; section in <a href="https://nexenta.com/sites/default/files/docs/ReleaseNotes/NEdge-1.1.0-FP3-IG_20160629.pdf">Installation Guide</a></p>
<h3><a class="anchor" aria-hidden="true" name="step-3-selecting-most-optimal-operational-profile-and-provision-your-cluster"></a><a href="#step-3-selecting-most-optimal-operational-profile-and-provision-your-cluster" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 3: Selecting most optimal operational profile and provision your cluster</h3>
<p>From the NexentaEdge deployment workstation, use the following command to deploy the NexentaEdge software to the nodes:</p>
<pre><code class="hljs">nedeploy deploy solo <span class="hljs-tag">&lt;<span class="hljs-name">ip-address</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">nodename</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">username:password</span>&gt;</span> -i <span class="hljs-tag">&lt;<span class="hljs-name">interface</span>&gt;</span>
    [-t <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>][-x <span class="hljs-tag">&lt;<span class="hljs-name">disks-to-exclude</span>&gt;</span>][-X <span class="hljs-tag">&lt;<span class="hljs-name">disks-to-reserve</span>&gt;</span>][-z <span class="hljs-tag">&lt;<span class="hljs-name">zone</span>&gt;</span>][-F <span class="hljs-tag">&lt;<span class="hljs-name">filesytem-type</span>&gt;</span>][-m]
    [--P <span class="hljs-tag">&lt;<span class="hljs-name">number-of-partitions</span>&gt;</span>][--upgrade]
</code></pre>
<p>Consult with &quot;Installing NexentaEdge&quot; section in <a href="https://nexenta.com/sites/default/files/docs/ReleaseNotes/NEdge-1.1.0-FP3-IG_20160629.pdf">Installation Guide</a></p>
<p>Verify that cluster gets installed and nodes appearing in NEADM output. From the NexentaEdge management workstation, use the following command to see the status of installing cluster:</p>
<pre><code class="hljs">neadm<span class="hljs-built_in"> system </span>status
</code></pre>
<h3><a class="anchor" aria-hidden="true" name="step-4-deploying-management-gui"></a><a href="#step-4-deploying-management-gui" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 4: Deploying management GUI</h3>
<p>To simplify infrastructure management and get familiarity with the solution quicker, please deploy management GUI. On the NexentaEdge management workstation, use the following command to deploy the NexentaEdge GUI software:</p>
<pre><code class="hljs">docker <span class="hljs-builtin-name">run</span> -d -P -p 3000:3000 -e <span class="hljs-attribute">API_ENDPOINT</span>=%ADDR% nexenta/nedgeui:2.1.3
</code></pre>
<p>Replace %ADDR% with <a href="http://IP:PORT">http://IP:PORT</a> pointing to management endpoint. Example: http://192.168.1.1:8080.</p>
<p>Using compatible browser (certified with Firefox and Chrome), login to the URL exposed on NexentaEdge management workstation running GUI docker image.</p>
<p>Consult with &quot;Starting the NexentaEdge GUI&quot; section in <a href="https://nexenta.com/sites/default/files/docs/ReleaseNotes/NEdge-1.1.0-FP3-IG_20160629.pdf">Installation Guide</a></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="webui-installation.html">← Installation of NexentaEdge DevOps Edition Web UI</a><a class="docs-next button" href="docker-installation.html">Installation NexentaEdge DevOps Edition as a Docker container →</a></div></div></div></div><footer class="nav-footer" id="footer"><section style="font-size:16px;display:flex;flex-direction:column;align-items:center;padding-top:10px;"><img src="/img/logo-nexenta-edge.png" style="height:60px;margin-bottom:10px;"/><a href="https://nexenta.com/products/nexentaedge" style="padding-bottom:20px;">NexentaEdge Product Page</a></section><section class="copyright">Copyright © 2018 Nexenta Systems, Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                apiKey: '839b05a95d1375c54722a0161e78d578',
                indexName: 'nexentaedge',
                inputSelector: '#search_input_react'
              });
            </script></body></html>